<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Hello, World!</title>
</head>

<body>
	<div class="container">
		<div id="inside">
			<h1 class="weight-300" id="title">The site is currently under maintenance</h1>
			<p id="message"></p>
			<hr>
			<p>This outage started at: <strong id="started"></strong></p>
			<p>This outage is expected to end at: <b id="expected_end"></b></p>
		</div>
	</div>
</body>

<script>
	async function get_and_set_msg() {
		let resp = await fetch('/status');
		let obj = await resp.json();
		if (!obj["outage"]) {
			document.getElementById("title").innerText = "The site is currently not under maintenance, so this site shouldn't display at all!";
			return;
		}

		document.getElementById("message").innerText = obj["message"]
		let started_at = new Date(obj["started"]).toLocaleString();
		let expected_end = obj["estimated_end"] === undefined ? "Unknown" : new Date(obj["estimated_end"] ?? 0).toLocaleString();
		console.log(started_at, expected_end);
		document.getElementById("started").innerText = started_at;
		document.getElementById("expected_end").innerText = expected_end;
	}

	get_and_set_msg()
</script>

</html>

<style>
	@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap');


	.weight-300 {
		font-weight: 300;
	}

	.container {
		min-width: 100vw;
		width: 100vw;
		min-height: 100vh;
		height: 100vh;
		margin: 0 auto;
		display: flex;
		justify-content: center;
		align-items: center;
	}

	html {
		min-height: 100%;
	}

	p {
		font-weight: 100;
	}

	body {
		margin: 0;
		min-height: 100%;
		background: linear-gradient(11deg,
				rgba(254, 5, 253, 1) 0%,
				rgba(96, 1, 200, 1) 5%,
				rgba(66, 1, 138, 1) 19%,
				rgba(16, 0, 35, 1) 34%,
				rgba(0, 0, 0, 1) 80%,
				rgba(96, 1, 200, 1) 91%,
				rgba(254, 5, 253, 1) 100%) no-repeat;
		background-attachment: fixed;
	}

	* {
		font-family: "Roboto Mono", monospace;
		font-optical-sizing: auto;
		font-style: normal;
		color: white;
	}

	/* Button specific stuff */
	button {
		border: 1px none;
		border-radius: 40px;
		background-color: rgba(16, 0, 35, 1);
		padding: 16px 32px;
		box-shadow: 0px 0px 100px 30px rgba(96, 1, 200, 0.75);
		transition: 0.5s;
		font-weight: 300;
	}

	button:hover {
		background-color: rgb(35, 18, 56);
		box-shadow: 0px 0px 100px 30px rgba(96, 1, 200, 1);
	}

	button:active {
		background-color: rgb(70, 55, 87);
	}
</style>